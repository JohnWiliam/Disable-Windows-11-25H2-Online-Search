<ui:FluentWindow x:Class="DisableWin11Search.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
        mc:Ignorable="d"
        Title="Desativar Pesquisa Online do Windows 11" 
        Height="Auto" Width="720"
        SizeToContent="Height"
        WindowBackdropType="Mica"
        ExtendsContentIntoTitleBar="True"
        ResizeMode="CanMinimize"
        WindowStartupLocation="CenterScreen">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" /> <!-- TitleBar + Header -->
            <RowDefinition Height="*" />    <!-- Content -->
            <RowDefinition Height="Auto" /> <!-- Footer -->
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="20,10,20,5">
            <!-- Custom TitleBar (Text Hidden) -->
            <ui:TitleBar Title="" Margin="-20,-10,-20,5" />
            
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <StackPanel Grid.Column="0">
                    <TextBlock Text="Desativar Pesquisa Online do Windows 11" FontSize="18" FontWeight="SemiBold" Foreground="{DynamicResource TextFillColorPrimaryBrush}" />
                    <TextBlock Text="Otimize sua privacidade e desempenho" FontSize="12" Foreground="{DynamicResource TextFillColorSecondaryBrush}" Margin="0,2,0,0" />
                </StackPanel>
                <TextBlock Grid.Column="1" Text="v1.0.0" FontSize="12" Foreground="{DynamicResource TextFillColorTertiaryBrush}" VerticalAlignment="Bottom" />
            </Grid>
        </StackPanel>

        <!-- Content -->
        <StackPanel Grid.Row="1" Margin="20,5,20,10" VerticalAlignment="Top">
                
                <!-- Card 1: Search Suggestions -->
                <ui:CardExpander IsExpanded="True" Margin="0,0,0,6">
                    <ui:CardExpander.Icon>
                        <ui:SymbolIcon Symbol="Search24" />
                    </ui:CardExpander.Icon>
                    <ui:CardExpander.Header>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                <TextBlock Text="Bloqueio de Sugestões" FontSize="14" FontWeight="Medium" />
                            </StackPanel>
                            <!-- Custom Status Indicator -->
                            <Border Grid.Column="1" x:Name="StatusSuggestions" Background="Transparent" Padding="8,4" CornerRadius="4">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                    <ui:SymbolIcon x:Name="IconSuggestions" Symbol="Circle24" Filled="True" FontSize="12" Foreground="{DynamicResource TextFillColorTertiaryBrush}" Margin="0,1,6,0"/>
                                    <TextBlock x:Name="TextSuggestions" Text="Verificando..." FontSize="12" FontWeight="Medium" Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                                </StackPanel>
                            </Border>
                        </Grid>
                    </ui:CardExpander.Header>
                    <StackPanel Margin="0,0,0,0">
                        <TextBlock Text="Impede o envio do que você digita na pesquisa para a Microsoft (Policy)." Foreground="{DynamicResource TextFillColorTertiaryBrush}" Margin="0,0,0,8" FontSize="11" TextWrapping="Wrap"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <ui:Button Grid.Column="0" Content="Aplicar" Appearance="Primary" Click="ApplySuggestions_Click" Margin="0,0,8,0" Height="30" Padding="10,0">
                                <ui:Button.Icon>
                                    <ui:SymbolIcon Symbol="Checkmark20" />
                                </ui:Button.Icon>
                            </ui:Button>
                            <ui:Button Grid.Column="1" Content="Reverter" Appearance="Secondary" Click="RevertSuggestions_Click" Height="30" Padding="10,0">
                                <ui:Button.Icon>
                                    <ui:SymbolIcon Symbol="ArrowUndo20" />
                                </ui:Button.Icon>
                            </ui:Button>
                        </Grid>
                    </StackPanel>
                </ui:CardExpander>

                <!-- Card 2: Cloud Search -->
                <ui:CardExpander IsExpanded="True" Margin="0,0,0,6">
                    <ui:CardExpander.Icon>
                         <ui:SymbolIcon Symbol="CloudOff24" />
                    </ui:CardExpander.Icon>
                    <ui:CardExpander.Header>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                <TextBlock Text="Bloqueio de Busca em Nuvem" FontSize="14" FontWeight="Medium" />
                            </StackPanel>
                            <Border Grid.Column="1" x:Name="StatusCloud" Background="Transparent" Padding="8,4" CornerRadius="4">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                    <ui:SymbolIcon x:Name="IconCloud" Symbol="Circle24" Filled="True" FontSize="12" Foreground="{DynamicResource TextFillColorTertiaryBrush}" Margin="0,1,6,0"/>
                                    <TextBlock x:Name="TextCloud" Text="Verificando..." FontSize="12" FontWeight="Medium" Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                                </StackPanel>
                            </Border>
                        </Grid>
                    </ui:CardExpander.Header>
                    <StackPanel Margin="0,0,0,0">
                         <TextBlock Text="Desativa a busca de conteúdo da sua conta Microsoft (OneDrive/Outlook)." Foreground="{DynamicResource TextFillColorTertiaryBrush}" Margin="0,0,0,8" FontSize="11" TextWrapping="Wrap"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <ui:Button Grid.Column="0" Content="Aplicar" Appearance="Primary" Click="ApplyCloud_Click" Margin="0,0,8,0" Height="30" Padding="10,0">
                                <ui:Button.Icon>
                                    <ui:SymbolIcon Symbol="Checkmark20" />
                                </ui:Button.Icon>
                            </ui:Button>
                            <ui:Button Grid.Column="1" Content="Reverter" Appearance="Secondary" Click="RevertCloud_Click" Height="30" Padding="10,0">
                                <ui:Button.Icon>
                                    <ui:SymbolIcon Symbol="ArrowUndo20" />
                                </ui:Button.Icon>
                            </ui:Button>
                        </Grid>
                    </StackPanel>
                </ui:CardExpander>

                <!-- Card 3: Bing Search -->
                <ui:CardExpander IsExpanded="True">
                    <ui:CardExpander.Icon>
                        <ui:SymbolIcon Symbol="DismissCircle24" />
                    </ui:CardExpander.Icon>
                    <ui:CardExpander.Header>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                <TextBlock Text="Bloqueio do Bing Integrado" FontSize="14" FontWeight="Medium" />
                            </StackPanel>
                             <Border Grid.Column="1" x:Name="StatusBing" Background="Transparent" Padding="8,4" CornerRadius="4">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                    <ui:SymbolIcon x:Name="IconBing" Symbol="Circle24" Filled="True" FontSize="12" Foreground="{DynamicResource TextFillColorTertiaryBrush}" Margin="0,1,6,0"/>
                                    <TextBlock x:Name="TextBing" Text="Verificando..." FontSize="12" FontWeight="Medium" Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                                </StackPanel>
                            </Border>
                        </Grid>
                    </ui:CardExpander.Header>
                    <StackPanel Margin="0,0,0,0">
                        <TextBlock Text="Remove resultados da web e notícias do Bing do menu Iniciar." Foreground="{DynamicResource TextFillColorTertiaryBrush}" Margin="0,0,0,8" FontSize="11" TextWrapping="Wrap"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <ui:Button Grid.Column="0" Content="Aplicar" Appearance="Primary" Click="ApplyBing_Click" Margin="0,0,8,0" Height="30" Padding="10,0">
                                <ui:Button.Icon>
                                    <ui:SymbolIcon Symbol="Checkmark20" />
                                </ui:Button.Icon>
                            </ui:Button>
                            <ui:Button Grid.Column="1" Content="Reverter" Appearance="Secondary" Click="RevertBing_Click" Height="30" Padding="10,0">
                                <ui:Button.Icon>
                                    <ui:SymbolIcon Symbol="ArrowUndo20" />
                                </ui:Button.Icon>
                            </ui:Button>
                        </Grid>
                    </StackPanel>
                </ui:CardExpander>

        </StackPanel>

        <!-- Footer -->
        <Border Grid.Row="2" Background="{DynamicResource ControlFillColorDefaultBrush}" Padding="20,15" BorderThickness="0,1,0,0" BorderBrush="{DynamicResource SurfaceStrokeColorDefaultBrush}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0" VerticalAlignment="Center">
                    <TextBlock Text="Criado por John Wiliam &amp; AI" FontSize="11" Foreground="{DynamicResource TextFillColorTertiaryBrush}" />
                </StackPanel>

                <ui:Button Grid.Column="1" Content="Reiniciar Explorer" Appearance="Danger" Click="RestartExplorer_Click" Height="30" FontSize="12">
                    <ui:Button.Icon>
                        <ui:SymbolIcon Symbol="ArrowClockwise20" />
                    </ui:Button.Icon>
                </ui:Button>
            </Grid>
        </Border>
    </Grid>
</ui:FluentWindow>
